{% extends "base.html" %}
{% load static %}

{% block main-content %}
<main class="main">

  <!-- Section Title -->
  <section id="history" class="history section">
    <div class="container section-title text-center" data-aos="fade-up">
      <h2 class="section-title-heading">Lịch Sử Giao Dịch</h2>
      <p class="section-title-description">Xem lịch sử giao dịch của bạn:</p>
    </div><!-- End Section Title -->

    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8" data-aos="fade-up" data-aos-delay="100">

          <!-- Lịch sử mua gói -->
          <div class="history-item mb-4">
            <h3 class="history-item-title">Lịch Sử Mua Gói</h3>
            <table class="table">
              <thead>
                <tr>
                  <th>Ngày</th>
                  <th>Tên Gói</th>
                  <th>Số Tiền</th>
                </tr>
              </thead>
              <tbody>
                {% for payment in payment_history %}
                <tr>
                  <td>{{ payment.transaction_date }}</td>
                  <td>{{ payment.package.name }}</td> <!-- Tên gói từ bảng Package -->
                  <td>{{ payment.value }} VNĐ</td> <!-- Giá trị giao dịch -->
                </tr>
                {% empty %}
                <tr>
                  <td colspan="3">Chưa có lịch sử mua gói.</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>

          <!-- Lịch sử nạp tiền -->
          <div class="history-item mb-4">
            <h3 class="history-item-title">Lịch Sử Nạp Tiền</h3>
            <table class="table">
              <thead>
                <tr>
                  <th>Ngày</th>
                  <th>Số Tiền Nạp</th>
                  <th>Số Dư Sau Nạp</th>
                </tr>
              </thead>
              <tbody>
                {% for wallet in wallet_history %}
                <tr>
                  <td>{{ wallet.transaction_date }}</td>
                  <td>{{ wallet.value }} VNĐ</td> <!-- Số tiền nạp -->
                  <td>{{ wallet.total }} VNĐ</td> <!-- Số dư sau khi nạp -->
                </tr>
                {% empty %}
                <tr>
                  <td colspan="3">Chưa có lịch sử nạp tiền.</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </div>

  </section><!-- /Lịch sử giao dịch -->

</main>
{% endblock main-content %}
